"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const anchor_1 = require("@project-serum/anchor");
function getVeTokenBalanceWithDepositAmount(poolInfo, depositAmount, lockupExpiration) {
    const currentSeconds = Math.floor(Date.now() / 1000);
    const secondsUntilLockupExpiry = Math.max(lockupExpiration.toNumber() - currentSeconds, 0);
    const working_balance_param = poolInfo.workingBalanceParam;
    const working_balance_for_stake = depositAmount.mul(working_balance_param.stakedFactor).div(new anchor_1.BN("1000000000000000000"));
    const working_balance_for_voting_power = new anchor_1.BN(0);
    const working_balance_for_lockup = depositAmount.mul(working_balance_param.lockupFactor).mul(new anchor_1.BN(secondsUntilLockupExpiry)).div(new anchor_1.BN("1000000000000000000"));
    const working_balance = working_balance_for_stake.add(working_balance_for_voting_power).add(working_balance_for_lockup);
    return working_balance;
}
exports.default = getVeTokenBalanceWithDepositAmount;
