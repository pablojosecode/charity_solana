import { Connection, PublicKey } from '@solana/web3.js';
import { TokenID, AppConfig, UserInfo, AssetPool, UserAssetInfo, ApiUserAssetInfo, ApiBorrowPowerInfo, ApiUserInfo } from '../types';
import { Decimal } from 'decimal.js';
export declare function createPortfolioLoader(userWalletKey: PublicKey, connection: Connection, fetchPrice?: (token: TokenID) => Promise<number>, config?: AppConfig): PortfolioLoader;
export declare class PortfolioLoader {
    readonly userWalletKey: PublicKey;
    private readonly connection;
    private readonly config;
    private fetchPrice;
    userInfoCache: UserInfo | undefined;
    assetPoolsCache: {
        [key in TokenID]?: AssetPool;
    };
    priceCache: {
        [key in TokenID]?: number;
    };
    private readonly actionWrapper;
    private readonly addresses;
    constructor(userWalletKey: PublicKey, connection: Connection, config: AppConfig, fetchPrice: (token: TokenID) => Promise<number>);
    refreshPortfolio(): Promise<void>;
    getUserInfo(): Promise<ApiUserInfo | undefined>;
    getUserInfoAddress(): Promise<PublicKey>;
    getBorrowPowerInfo(): Promise<ApiBorrowPowerInfo | undefined>;
    getUserAssetInfoList(): Promise<ApiUserAssetInfo[]>;
}
export declare function getBorrowPowerInfo(userInfoRaw: UserInfo, appConfig: AppConfig, fetchPool: (tokenId: TokenID) => Promise<AssetPool | undefined>, fetchPrice: (tokenId: TokenID) => Promise<number | undefined>): Promise<ApiBorrowPowerInfo | undefined>;
export declare function getUserAssetInfoList(userInfoRaw: UserInfo, appConfig: AppConfig, fetchPool: (tokenId: TokenID) => Promise<AssetPool | undefined>, fetchPrice: (tokenId: TokenID) => Promise<number | undefined>): Promise<ApiUserAssetInfo[]>;
export declare function getUserAssetInfo(tokenId: TokenID, userAssetInfoRaw: UserAssetInfo, assetPoolRaw: AssetPool | undefined, price: number | undefined): ApiUserAssetInfo | undefined;
export declare function fastForwardUserAssetInfo(tokenId: TokenID, userAssetInfoRaw: UserAssetInfo, assetPoolRaw: AssetPool, price: number | undefined): ApiUserAssetInfo;
export declare function fastForwardPositionAmount(lastAmount: Decimal, lastIndex: Decimal, currentIndex: Decimal): Decimal;
